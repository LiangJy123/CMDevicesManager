<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="CDMDevicesManagerDevWinUI.Views.DeviceSettings"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:CDMDevicesManagerDevWinUI.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="using:CommunityToolkit.WinUI.Controls"
    xmlns:dev="using:DevWinUI"
    mc:Ignorable="d">

    <Page.Resources>
        <!-- Card Style -->
        <Style x:Key="SettingsCardStyle" TargetType="Border">
            <Setter Property="Background" Value="{ThemeResource CardBackgroundFillColorDefaultBrush}" />
            <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="Padding" Value="20" />
            <Setter Property="Margin" Value="0,0,0,16" />
        </Style>

        <!-- Section Header Style -->
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="20" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Margin" Value="0,24,0,12" />
            <Setter Property="Foreground" Value="{ThemeResource AccentTextFillColorPrimaryBrush}" />
        </Style>

        <!-- Action Button Style -->
        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="MinWidth" Value="120" />
            <Setter Property="Height" Value="36" />
            <Setter Property="Margin" Value="0,0,12,0" />
        </Style>

        <!-- Status Indicator Style -->
        <Style x:Key="StatusIndicatorStyle" TargetType="Ellipse">
            <Setter Property="Width" Value="12" />
            <Setter Property="Height" Value="12" />
            <Setter Property="Margin" Value="0,0,8,0" />
        </Style>
    </Page.Resources>

    <!-- Full page layout without popup constraints -->
    <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="32">
            <StackPanel MaxWidth="800">

                <!-- Page Title -->
                <TextBlock Text="Device Settings" 
                           FontSize="28" 
                           FontWeight="Bold" 
                           Margin="0,0,0,24" />

                <!-- Device Information Section -->
                <TextBlock Text="Device Information" Style="{StaticResource SectionHeaderStyle}" />
                
                <Border Style="{StaticResource SettingsCardStyle}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="140" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!-- Product Name -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Product:" 
                                   FontWeight="SemiBold" Margin="0,0,0,12" />
                        <TextBlock Grid.Row="0" Grid.Column="1" 
                                   x:Name="ProductNameText"
                                   Text="Unknown Product" 
                                   Margin="0,0,0,12" />

                        <!-- Serial Number -->
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Serial:" 
                                   FontWeight="SemiBold" Margin="0,0,0,12" />
                        <TextBlock Grid.Row="1" Grid.Column="1" 
                                   x:Name="SerialNumberText"
                                   Text="Unknown Serial" 
                                   Margin="0,0,0,12" />

                        <!-- Manufacturer -->
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Manufacturer:" 
                                   FontWeight="SemiBold" Margin="0,0,0,12" />
                        <TextBlock Grid.Row="2" Grid.Column="1" 
                                   x:Name="ManufacturerText"
                                   Text="Unknown Manufacturer" 
                                   Margin="0,0,0,12" />

                        <!-- Hardware Version -->
                        <TextBlock Grid.Row="3" Grid.Column="0" Text="Hardware:" 
                                   FontWeight="SemiBold" Margin="0,0,0,12" />
                        <TextBlock Grid.Row="3" Grid.Column="1" 
                                   x:Name="HardwareVersionText" 
                                   Text="Loading..." 
                                   Margin="0,0,0,12" />

                        <!-- Firmware Version -->
                        <TextBlock Grid.Row="4" Grid.Column="0" Text="Firmware:" 
                                   FontWeight="SemiBold" />
                        <TextBlock Grid.Row="4" Grid.Column="1" 
                                   x:Name="FirmwareVersionText" 
                                   Text="Loading..." />
                    </Grid>
                </Border>

                <!-- Firmware Update Section -->
                <TextBlock Text="Firmware Update" Style="{StaticResource SectionHeaderStyle}" />
                <toolkit:SettingsExpander Description="Controls provide audible feedback" Header="Sound">
                    <toolkit:SettingsExpander.HeaderIcon>
                        <FontIcon Glyph="&#xEC4F;" />
                    </toolkit:SettingsExpander.HeaderIcon>
                    <toolkit:SettingsExpander.Items>
                        <toolkit:SettingsCard
                        x:Name="FirmwareUpdateCard"
                        Header="Check Firmware Update"
                        IsEnabled="True">
                            <toolkit:SettingsCard.Description>
                                <HyperlinkButton Content="Check Firmware Update" />
                            </toolkit:SettingsCard.Description>
                            <dev:ProgressButton Width="200"
                                    Checked="CheckUpdateButton_Checked"
                                    CheckedContent="Checking"
                                    Content="Check for Updates"
                                    Unchecked="CheckUpdateButton_Checked" />
                        </toolkit:SettingsCard>
                    </toolkit:SettingsExpander.Items>
                </toolkit:SettingsExpander>
                <Border Style="{StaticResource SettingsCardStyle}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!-- Status Row -->
                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,16">
                            <Ellipse x:Name="UpdateStatusIndicator" 
                                     Style="{StaticResource StatusIndicatorStyle}"
                                     Fill="Gray" />
                            <TextBlock x:Name="UpdateStatusText" 
                                       Text="Not checked" 
                                       VerticalAlignment="Center" />

                            <Button x:Name="CheckUpdateButton" 
                                    Content="Check for Updates" 
                                    Style="{StaticResource ActionButtonStyle}"
                                    Click="CheckUpdateButton_Click" />
                        </StackPanel>

                        <!-- Action Row -->
                        <StackPanel Grid.Row="1" Orientation="Horizontal">
                            <Button x:Name="InstallUpdateButton" 
                                    Content="Install Update" 
                                    Style="{StaticResource ActionButtonStyle}"
                                    Click="InstallUpdateButton_Click"
                                    IsEnabled="False" />
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Device Operations Section -->
                <TextBlock Text="Device Operations" Style="{StaticResource SectionHeaderStyle}" />
                
                <Border Style="{StaticResource SettingsCardStyle}">
                    <StackPanel>
                        <!-- Reset Operations -->
                        <StackPanel Margin="0,0,0,16">
                            <TextBlock Text="Reset Operations" FontWeight="SemiBold" Margin="0,0,0,12" />
                            <StackPanel Orientation="Horizontal">
                                <Button x:Name="RestartDeviceButton" 
                                        Content="Restart Device" 
                                        Style="{StaticResource ActionButtonStyle}"
                                        Click="RestartDeviceButton_Click" />
                                <Button x:Name="FactoryResetButton" 
                                        Content="Factory Reset" 
                                        Style="{StaticResource ActionButtonStyle}"
                                        Click="FactoryResetButton_Click" />
                            </StackPanel>
                        </StackPanel>

                        <!-- Other Operations -->
                        <StackPanel>
                            <TextBlock Text="Other Operations" FontWeight="SemiBold" Margin="0,0,0,12" />
                            <StackPanel Orientation="Horizontal">
                                <Button x:Name="RefreshInfoButton" 
                                        Content="Refresh Information" 
                                        Style="{StaticResource ActionButtonStyle}"
                                        Click="RefreshInfoButton_Click" />
                                <Button x:Name="DeviceStatusButton" 
                                        Content="Get Device Status" 
                                        Style="{StaticResource ActionButtonStyle}"
                                        Click="DeviceStatusButton_Click" />
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Device Configuration Section -->
                <TextBlock Text="Device Configuration" Style="{StaticResource SectionHeaderStyle}" />
                
                <Border Style="{StaticResource SettingsCardStyle}">
                    <StackPanel>
                        <!-- Offline Mode -->
                        <StackPanel Margin="0,0,0,16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="Offline Mode" FontWeight="SemiBold" />
                                    <TextBlock Text="Disconnect device from network services" 
                                               Foreground="{ThemeResource TextFillColorSecondaryBrush}" 
                                               FontSize="12" 
                                               Margin="0,4,0,0" />
                                </StackPanel>
                                
                                <ToggleSwitch Grid.Column="1" 
                                              x:Name="OfflineModeToggle"
                                              Toggled="OfflineModeToggle_Toggled" />
                            </Grid>
                        </StackPanel>

                        <!-- Display Settings -->
                        <StackPanel Margin="0,0,0,16">
                            <TextBlock Text="Display Settings" FontWeight="SemiBold" Margin="0,0,0,12" />
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="50" />
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Column="0" Text="Brightness:" VerticalAlignment="Center" />
                                <Slider Grid.Column="1" 
                                        x:Name="BrightnessSlider"
                                        Minimum="0" 
                                        Maximum="100" 
                                        Value="80"
                                        ValueChanged="BrightnessSlider_ValueChanged"
                                        Margin="12,0" />
                                <TextBlock Grid.Column="2" 
                                           x:Name="BrightnessValueText"
                                           Text="80" 
                                           VerticalAlignment="Center" 
                                           HorizontalAlignment="Center" />
                            </Grid>
                        </StackPanel>

                        <!-- Rotation Settings -->
                        <StackPanel>
                            <TextBlock Text="Display Rotation" FontWeight="SemiBold" Margin="0,0,0,12" />
                            <StackPanel Orientation="Horizontal">
                                <RadioButton x:Name="Rotation0" Content="0째" GroupName="Rotation" IsChecked="True" Margin="0,0,16,0" Checked="RotationChanged" />
                                <RadioButton x:Name="Rotation90" Content="90째" GroupName="Rotation" Margin="0,0,16,0" Checked="RotationChanged" />
                                <RadioButton x:Name="Rotation180" Content="180째" GroupName="Rotation" Margin="0,0,16,0" Checked="RotationChanged" />
                                <RadioButton x:Name="Rotation270" Content="270째" GroupName="Rotation" Checked="RotationChanged" />
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Status Information Section -->
                <TextBlock Text="Status Information" Style="{StaticResource SectionHeaderStyle}" />
                
                <Border Style="{StaticResource SettingsCardStyle}">
                    <ScrollViewer MaxHeight="200" VerticalScrollBarVisibility="Auto">
                        <TextBlock x:Name="StatusInfoText" 
                                   Text="Click 'Get Device Status' to refresh device status information."
                                   FontFamily="Consolas"
                                   FontSize="12"
                                   TextWrapping="Wrap" />
                    </ScrollViewer>
                </Border>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
